"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var effectsHelpers_1 = require("./effectsHelpers");
var helpers_1 = require("./helpers");
var psdReader_1 = require("./psdReader");
var psdWriter_1 = require("./psdWriter");
var descriptor_1 = require("./descriptor");
var handlers = [];
var handlersMap = {};
function addHandler(key, has, read, write) {
    var handler = { key: key, has: has, read: read, write: write };
    handlers.push(handler);
    handlersMap[handler.key] = handler;
}
function getHandler(key) {
    return handlersMap[key];
}
exports.getHandler = getHandler;
function getHandlers() {
    return handlers;
}
exports.getHandlers = getHandlers;
function revMap(map) {
    var result = {};
    Object.keys(map).forEach(function (key) { return result[map[key]] = key; });
    return result;
}
// textGridding.None
var textGridding = {
    none: 'None',
};
var textGriddingRev = revMap(textGridding);
function toTextGridding(value) {
    return textGriddingRev[value.split('.')[1]] || 'none';
}
function fromTextGridding(value) {
    return "textGridding." + (textGridding[value] || 'None');
}
// Ornt.Hrzn | Ornt.Vrtc
var Ornt = {
    horizontal: 'Hrzn',
    vertical: 'Vrtc',
};
var OrntRev = revMap(Ornt);
function toOrientation(value) {
    return OrntRev[value.split('.')[1]] || 'horizontal';
}
function fromOrientation(value) {
    return "textGridding." + (Ornt[value] || 'Hrzn');
}
// Annt.antiAliasSharp | Annt.Anno | Annt.AnCr | Annt.AnSt | Annt.AnSm
var Annt = {
    none: 'Anno',
    sharp: 'antiAliasSharp',
    crisp: 'AnCr',
    strong: 'AnSt',
    smooth: 'AnSm',
};
var AnntRev = revMap(Annt);
function toAntialias(value) {
    return AnntRev[value.split('.')[1]] || 'none';
}
function fromAntialias(value) {
    return "Annt." + (Annt[value] || 'Anno');
}
// warpStyle.warpNone | warpStyle.warpArc | warpStyle.warpArcLower | warpStyle.warpArcUpper | warpStyle.warpArch
// warpStyle.warpBulge | warpStyle.warpShellLower | warpStyle.warpShellUpper | warpStyle.warpFlag
// warpStyle.warpWave | warpStyle.warpFish | warpStyle.warpRise | warpStyle.warpFisheye |
// warpStyle.warpInflate | warpStyle.warpSqueeze | warpStyle.warpTwist
var warpStyle = {
    none: 'warpNone',
    arc: 'warpArc',
    arcLower: 'warpArcLower',
    arcUpper: 'warpArcUpper',
    arch: 'warpArch',
    bulge: 'warpBulge',
    shellLower: 'warpShellLower',
    shellUpper: 'warpShellUpper',
    flag: 'warpFlag',
    wave: 'warpWave',
    fish: 'warpFish',
    rise: 'warpRise',
    fisheye: 'warpFisheye',
    inflate: 'warpInflate',
    squeeze: 'warpSqueeze',
    twist: 'warpTwist',
};
var warpStyleRev = revMap(warpStyle);
function toWarpStyle(value) {
    return warpStyleRev[value.split('.')[1]] || 'none';
}
function fromWarpStyle(value) {
    return "warpStyle." + (warpStyle[value] || 'warpNone');
}
addHandler('TySh', function (target) { return target.text !== undefined; }, function (reader, target) {
    var version = psdReader_1.readInt16(reader);
    if (version !== 1) {
        throw new Error("Invalid TySh version: " + version);
    }
    var transform = [
        psdReader_1.readFloat64(reader),
        psdReader_1.readFloat64(reader),
        psdReader_1.readFloat64(reader),
        psdReader_1.readFloat64(reader),
        psdReader_1.readFloat64(reader),
        psdReader_1.readFloat64(reader),
    ];
    var textVersion = psdReader_1.readInt16(reader);
    var descriptorVersion = psdReader_1.readInt32(reader);
    if (textVersion !== 50 || descriptorVersion !== 16) {
        throw new Error("Invalid TySh text version: " + textVersion + "/" + descriptorVersion);
    }
    var text = descriptor_1.readDescriptorStructure(reader);
    // console.log('EngineData:', JSON.stringify(parseEngineData(text.EngineData), null, 2), '\n');
    var warpVersion = psdReader_1.readInt16(reader);
    var warpDescriptorVersion = psdReader_1.readInt32(reader);
    if (warpVersion !== 1 || warpDescriptorVersion !== 16) {
        throw new Error("Invalid TySh warp version: " + warpVersion + " " + warpDescriptorVersion);
    }
    var warp = descriptor_1.readDescriptorStructure(reader);
    var left = psdReader_1.readInt32(reader);
    var top = psdReader_1.readInt32(reader);
    var right = psdReader_1.readInt32(reader);
    var bottom = psdReader_1.readInt32(reader);
    target.text = {
        transform: transform, left: left, top: top, right: right, bottom: bottom,
        text: text['Txt '],
        index: text.TextIndex || 0,
        gridding: toTextGridding(text.textGridding),
        antialias: toAntialias(text.AntA),
        orientation: toOrientation(text.Ornt),
        warp: {
            style: toWarpStyle(warp.warpStyle),
            value: warp.warpValue || 0,
            perspective: warp.warpPerspective || 0,
            perspectiveOther: warp.warpPerspectiveOther || 0,
            rotate: toOrientation(warp.warpRotate),
        },
    };
}, function (writer, target) {
    var text = target.text;
    var warp = text.warp || {};
    var transform = text.transform || [1, 0, 0, 1, 0, 0];
    var textDescriptor = {
        'Txt ': text.text,
        textGridding: fromTextGridding(text.gridding),
        Ornt: fromOrientation(text.orientation),
        AntA: fromAntialias(text.antialias),
        TextIndex: text.index || 0,
    };
    var warpDescriptor = {
        warpStyle: fromWarpStyle(warp.style),
        warpValue: warp.value || 0,
        warpPerspective: warp.perspective || 0,
        warpPerspectiveOther: warp.perspectiveOther || 0,
        warpRotate: fromOrientation(warp.rotate),
    };
    psdWriter_1.writeInt16(writer, 1); // version
    for (var i = 0; i < 6; i++) {
        psdWriter_1.writeFloat64(writer, transform[i] || 0);
    }
    psdWriter_1.writeInt16(writer, 50); // text version
    psdWriter_1.writeInt32(writer, 16); // text descriptor version
    descriptor_1.writeDescriptorStructure(writer, '', 'TxLr', textDescriptor);
    psdWriter_1.writeInt16(writer, 1); // warp version
    psdWriter_1.writeInt32(writer, 16); // warp descriptor version
    descriptor_1.writeDescriptorStructure(writer, '', 'warp', warpDescriptor);
    psdWriter_1.writeInt32(writer, text.left || 0);
    psdWriter_1.writeInt32(writer, text.top || 0);
    psdWriter_1.writeInt32(writer, text.right || 0);
    psdWriter_1.writeInt32(writer, text.bottom || 0);
});
addHandler('luni', function (target) { return target.name !== undefined; }, function (reader, target, left) {
    target.name = psdReader_1.readUnicodeString(reader);
    psdReader_1.skipBytes(reader, left()); // TEMP: skipping
}, function (writer, target) {
    psdWriter_1.writeUnicodeString(writer, target.name);
});
addHandler('lnsr', function (target) { return target.nameSource !== undefined; }, function (reader, target) { return target.nameSource = psdReader_1.readSignature(reader); }, function (writer, target) { return psdWriter_1.writeSignature(writer, target.nameSource); });
addHandler('lyid', function (target) { return target.id !== undefined; }, function (reader, target) { return target.id = psdReader_1.readUint32(reader); }, function (writer, target) { return psdWriter_1.writeUint32(writer, target.id); });
addHandler('clbl', function (target) { return target.blendClippendElements !== undefined; }, function (reader, target) {
    target.blendClippendElements = !!psdReader_1.readUint8(reader);
    psdReader_1.skipBytes(reader, 3);
}, function (writer, target) {
    psdWriter_1.writeUint8(writer, target.blendClippendElements ? 1 : 0);
    psdWriter_1.writeZeros(writer, 3);
});
addHandler('infx', function (target) { return target.blendInteriorElements !== undefined; }, function (reader, target) {
    target.blendInteriorElements = !!psdReader_1.readUint8(reader);
    psdReader_1.skipBytes(reader, 3);
}, function (writer, target) {
    psdWriter_1.writeUint8(writer, target.blendInteriorElements ? 1 : 0);
    psdWriter_1.writeZeros(writer, 3);
});
addHandler('knko', function (target) { return target.knockout !== undefined; }, function (reader, target) {
    target.knockout = !!psdReader_1.readUint8(reader);
    psdReader_1.skipBytes(reader, 3);
}, function (writer, target) {
    psdWriter_1.writeUint8(writer, target.knockout ? 1 : 0);
    psdWriter_1.writeZeros(writer, 3);
});
addHandler('lspf', function (target) { return target.protected !== undefined; }, function (reader, target) {
    var flags = psdReader_1.readUint32(reader);
    target.protected = {
        transparency: (flags & 0x01) !== 0,
        composite: (flags & 0x02) !== 0,
        position: (flags & 0x04) !== 0,
    };
}, function (writer, target) {
    var flags = (target.protected.transparency ? 0x01 : 0) |
        (target.protected.composite ? 0x02 : 0) |
        (target.protected.position ? 0x04 : 0);
    psdWriter_1.writeUint32(writer, flags);
});
addHandler('lclr', function (target) { return target.sheetColors !== undefined; }, function (reader, target) {
    target.sheetColors = {
        color1: psdReader_1.readUint32(reader),
        color2: psdReader_1.readUint32(reader),
    };
}, function (writer, target) {
    psdWriter_1.writeUint32(writer, target.sheetColors.color1);
    psdWriter_1.writeUint32(writer, target.sheetColors.color2);
});
addHandler('shmd', function (target) { return target.metadata !== undefined; }, function (reader, target) {
    var count = psdReader_1.readUint32(reader);
    target.metadata = [];
    for (var i = 0; i < count; i++) {
        var signature = psdReader_1.readSignature(reader);
        if (signature !== '8BIM')
            throw new Error("Invalid signature: '" + signature + "'");
        var key = psdReader_1.readSignature(reader);
        var copy = !!psdReader_1.readUint8(reader);
        psdReader_1.skipBytes(reader, 3);
        var length_1 = psdReader_1.readUint32(reader);
        var data = helpers_1.toArray(psdReader_1.readBytes(reader, length_1));
        target.metadata.push({ key: key, copy: copy, data: data });
    }
}, function (writer, target) {
    psdWriter_1.writeUint32(writer, target.metadata.length);
    for (var i = 0; i < target.metadata.length; i++) {
        var item = target.metadata[i];
        psdWriter_1.writeSignature(writer, '8BIM');
        psdWriter_1.writeSignature(writer, item.key);
        psdWriter_1.writeUint8(writer, item.copy ? 1 : 0);
        psdWriter_1.writeZeros(writer, 3);
        psdWriter_1.writeUint32(writer, item.data.length);
        psdWriter_1.writeBytes(writer, new Uint8Array(item.data));
    }
});
addHandler('fxrp', function (target) { return target.referencePoint !== undefined; }, function (reader, target) {
    target.referencePoint = {
        x: psdReader_1.readFloat64(reader),
        y: psdReader_1.readFloat64(reader),
    };
}, function (writer, target) {
    psdWriter_1.writeFloat64(writer, target.referencePoint.x);
    psdWriter_1.writeFloat64(writer, target.referencePoint.y);
});
addHandler('lsct', function (target) { return target.sectionDivider !== undefined; }, function (reader, target, left) {
    var item = {};
    item.type = psdReader_1.readUint32(reader);
    if (left()) {
        var signature = psdReader_1.readSignature(reader);
        if (signature !== '8BIM')
            throw new Error("Invalid signature: '" + signature + "'");
        item.key = psdReader_1.readSignature(reader);
    }
    if (left()) {
        // 0 = normal
        // 1 = scene group, affects the animation timeline.
        item.subType = psdReader_1.readUint32(reader);
    }
    target.sectionDivider = item;
}, function (writer, target) {
    psdWriter_1.writeUint32(writer, target.sectionDivider.type);
    if (target.sectionDivider.key) {
        psdWriter_1.writeSignature(writer, '8BIM');
        psdWriter_1.writeSignature(writer, target.sectionDivider.key);
        if (target.sectionDivider.subtype !== undefined)
            psdWriter_1.writeUint32(writer, target.sectionDivider.subtype);
    }
});
addHandler('lyvr', function (target) { return target.version !== undefined; }, function (reader, target) {
    target.version = psdReader_1.readUint32(reader);
}, function (writer, target) {
    psdWriter_1.writeUint32(writer, target.version);
});
addHandler('lrFX', function (target) { return target.effects !== undefined; }, function (reader, target, left) {
    target.effects = effectsHelpers_1.readEffects(reader);
    psdReader_1.skipBytes(reader, left()); // TEMP: skipping
}, function (writer, target) {
    effectsHelpers_1.writeEffects(writer, target.effects);
});
// addHandler(
// 	'Txt2',
// 	target => !!(target as any)['__Txt2'], // target.text !== undefined,
// 	(reader, target, left) => {
// 		const textEngineData = readBytes(reader, left());
// 		(target as any)['__Txt2'] = Array.from(textEngineData);
// 		console.log('Txt2:textEngineData', parseEngineData(textEngineData));
// 	},
// 	(writer, target) => {
// 		writeBytes(writer, new Uint8Array((target as any)['__Txt2'])); // new Uint8Array(target.textEngineData!));
// 	},
// );
addHandler('FMsk', function (target) { return target.filterMask !== undefined; }, function (reader, target) {
    target.filterMask = {
        colorSpace: helpers_1.readColor(reader),
        opacity: psdReader_1.readUint16(reader),
    };
}, function (writer, target) {
    psdWriter_1.writeBytes(writer, new Uint8Array(target.filterMask.colorSpace));
    psdWriter_1.writeUint16(writer, target.filterMask.opacity);
});
// TODO: implement
addHandler('lfx2', function (target) { return !target; }, // target.objectBasedEffectsLayerInfo !== undefined,
function (reader, _target, left) {
    psdReader_1.skipBytes(reader, left());
    // const version = readUint32(reader);
    // const descriptorVersion = readUint32(reader);
    // const name = reader.readUnicodeString();
    // const classId = readStringOrClassId(reader);
    // const itemsCount = readUint32(reader);
    //for (let i = 0; i < itemsCount; i++) {
    //	console.log('read item');
    //	const key = readStringOrClassId(reader);
    //	console.log('key', [key]);
    //}
    //target.objectBasedEffectsLayerInfo = {
    //	version,
    //	descriptorVersion,
    //	descriptor: {
    //		name,
    //		classId,
    //		//...
    //	},
    //};
}, function (_writer, _target) {
    //...
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZGl0aW9uYWxJbmZvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbURBQTZEO0FBQzdELHFDQUErQztBQUUvQyx5Q0FHcUI7QUFDckIseUNBR3FCO0FBQ3JCLDJDQUFpRjtBQVNqRixJQUFNLFFBQVEsR0FBa0IsRUFBRSxDQUFDO0FBQ25DLElBQU0sV0FBVyxHQUFtQyxFQUFFLENBQUM7QUFFdkQsU0FBUyxVQUFVLENBQ2xCLEdBQVcsRUFDWCxHQUE2QyxFQUM3QyxJQUFrRixFQUNsRixLQUErRDtJQUUvRCxJQUFNLE9BQU8sR0FBZ0IsRUFBRSxHQUFHLEtBQUEsRUFBRSxHQUFHLEtBQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFDO0lBQ3ZELFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkIsV0FBVyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUM7QUFDcEMsQ0FBQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxHQUFXO0lBQ3JDLE9BQU8sV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3pCLENBQUM7QUFGRCxnQ0FFQztBQUVELFNBQWdCLFdBQVc7SUFDMUIsT0FBTyxRQUFRLENBQUM7QUFDakIsQ0FBQztBQUZELGtDQUVDO0FBdUJELFNBQVMsTUFBTSxDQUFDLEdBQVM7SUFDeEIsSUFBTSxNQUFNLEdBQVMsRUFBRSxDQUFDO0lBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBdEIsQ0FBc0IsQ0FBQyxDQUFDO0lBQ3hELE9BQU8sTUFBTSxDQUFDO0FBQ2YsQ0FBQztBQUVELG9CQUFvQjtBQUNwQixJQUFNLFlBQVksR0FBUztJQUMxQixJQUFJLEVBQUUsTUFBTTtDQUNaLENBQUM7QUFFRixJQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7QUFFN0MsU0FBUyxjQUFjLENBQUMsS0FBYTtJQUNwQyxPQUFRLGVBQWUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFTLElBQUksTUFBTSxDQUFDO0FBQ2hFLENBQUM7QUFFRCxTQUFTLGdCQUFnQixDQUFDLEtBQStCO0lBQ3hELE9BQU8sbUJBQWdCLFlBQVksQ0FBQyxLQUFNLENBQUMsSUFBSSxNQUFNLENBQUUsQ0FBQztBQUN6RCxDQUFDO0FBRUQsd0JBQXdCO0FBQ3hCLElBQU0sSUFBSSxHQUFTO0lBQ2xCLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLFFBQVEsRUFBRSxNQUFNO0NBQ2hCLENBQUM7QUFFRixJQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFN0IsU0FBUyxhQUFhLENBQUMsS0FBYTtJQUNuQyxPQUFRLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFTLElBQUksWUFBWSxDQUFDO0FBQzlELENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FBQyxLQUE4QjtJQUN0RCxPQUFPLG1CQUFnQixJQUFJLENBQUMsS0FBTSxDQUFDLElBQUksTUFBTSxDQUFFLENBQUM7QUFDakQsQ0FBQztBQUVELHNFQUFzRTtBQUN0RSxJQUFNLElBQUksR0FBUztJQUNsQixJQUFJLEVBQUUsTUFBTTtJQUNaLEtBQUssRUFBRSxnQkFBZ0I7SUFDdkIsS0FBSyxFQUFFLE1BQU07SUFDYixNQUFNLEVBQUUsTUFBTTtJQUNkLE1BQU0sRUFBRSxNQUFNO0NBQ2QsQ0FBQztBQUVGLElBQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUU3QixTQUFTLFdBQVcsQ0FBQyxLQUFhO0lBQ2pDLE9BQVEsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQVMsSUFBSSxNQUFNLENBQUM7QUFDeEQsQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFDLEtBQTRCO0lBQ2xELE9BQU8sV0FBUSxJQUFJLENBQUMsS0FBTSxDQUFDLElBQUksTUFBTSxDQUFFLENBQUM7QUFDekMsQ0FBQztBQUVELGdIQUFnSDtBQUNoSCxpR0FBaUc7QUFDakcseUZBQXlGO0FBQ3pGLHNFQUFzRTtBQUN0RSxJQUFNLFNBQVMsR0FBUztJQUN2QixJQUFJLEVBQUUsVUFBVTtJQUNoQixHQUFHLEVBQUUsU0FBUztJQUNkLFFBQVEsRUFBRSxjQUFjO0lBQ3hCLFFBQVEsRUFBRSxjQUFjO0lBQ3hCLElBQUksRUFBRSxVQUFVO0lBQ2hCLEtBQUssRUFBRSxXQUFXO0lBQ2xCLFVBQVUsRUFBRSxnQkFBZ0I7SUFDNUIsVUFBVSxFQUFFLGdCQUFnQjtJQUM1QixJQUFJLEVBQUUsVUFBVTtJQUNoQixJQUFJLEVBQUUsVUFBVTtJQUNoQixJQUFJLEVBQUUsVUFBVTtJQUNoQixJQUFJLEVBQUUsVUFBVTtJQUNoQixPQUFPLEVBQUUsYUFBYTtJQUN0QixPQUFPLEVBQUUsYUFBYTtJQUN0QixPQUFPLEVBQUUsYUFBYTtJQUN0QixLQUFLLEVBQUUsV0FBVztDQUNsQixDQUFDO0FBRUYsSUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRXZDLFNBQVMsV0FBVyxDQUFDLEtBQWE7SUFDakMsT0FBUSxZQUFZLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBUyxJQUFJLE1BQU0sQ0FBQztBQUM3RCxDQUFDO0FBRUQsU0FBUyxhQUFhLENBQUMsS0FBNEI7SUFDbEQsT0FBTyxnQkFBYSxTQUFTLENBQUMsS0FBTSxDQUFDLElBQUksVUFBVSxDQUFFLENBQUM7QUFDdkQsQ0FBQztBQUVELFVBQVUsQ0FDVCxNQUFNLEVBQ04sVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsSUFBSSxLQUFLLFNBQVMsRUFBekIsQ0FBeUIsRUFDbkMsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLElBQU0sT0FBTyxHQUFHLHFCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFbEMsSUFBSSxPQUFPLEtBQUssQ0FBQyxFQUFFO1FBQ2xCLE1BQU0sSUFBSSxLQUFLLENBQUMsMkJBQXlCLE9BQVMsQ0FBQyxDQUFDO0tBQ3BEO0lBRUQsSUFBTSxTQUFTLEdBQUc7UUFDakIsdUJBQVcsQ0FBQyxNQUFNLENBQUM7UUFDbkIsdUJBQVcsQ0FBQyxNQUFNLENBQUM7UUFDbkIsdUJBQVcsQ0FBQyxNQUFNLENBQUM7UUFDbkIsdUJBQVcsQ0FBQyxNQUFNLENBQUM7UUFDbkIsdUJBQVcsQ0FBQyxNQUFNLENBQUM7UUFDbkIsdUJBQVcsQ0FBQyxNQUFNLENBQUM7S0FDbkIsQ0FBQztJQUVGLElBQU0sV0FBVyxHQUFHLHFCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEMsSUFBTSxpQkFBaUIsR0FBRyxxQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRTVDLElBQUksV0FBVyxLQUFLLEVBQUUsSUFBSSxpQkFBaUIsS0FBSyxFQUFFLEVBQUU7UUFDbkQsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQ0FBOEIsV0FBVyxTQUFJLGlCQUFtQixDQUFDLENBQUM7S0FDbEY7SUFFRCxJQUFNLElBQUksR0FBbUIsb0NBQXVCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFN0QsK0ZBQStGO0lBRS9GLElBQU0sV0FBVyxHQUFHLHFCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEMsSUFBTSxxQkFBcUIsR0FBRyxxQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWhELElBQUksV0FBVyxLQUFLLENBQUMsSUFBSSxxQkFBcUIsS0FBSyxFQUFFLEVBQUU7UUFDdEQsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQ0FBOEIsV0FBVyxTQUFJLHFCQUF1QixDQUFDLENBQUM7S0FDdEY7SUFFRCxJQUFNLElBQUksR0FBbUIsb0NBQXVCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFN0QsSUFBTSxJQUFJLEdBQUcscUJBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMvQixJQUFNLEdBQUcsR0FBRyxxQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzlCLElBQU0sS0FBSyxHQUFHLHFCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDaEMsSUFBTSxNQUFNLEdBQUcscUJBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUVqQyxNQUFNLENBQUMsSUFBSSxHQUFHO1FBQ2IsU0FBUyxXQUFBLEVBQUUsSUFBSSxNQUFBLEVBQUUsR0FBRyxLQUFBLEVBQUUsS0FBSyxPQUFBLEVBQUUsTUFBTSxRQUFBO1FBQ25DLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ2xCLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUM7UUFDMUIsUUFBUSxFQUFFLGNBQWMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQzNDLFNBQVMsRUFBRSxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNqQyxXQUFXLEVBQUUsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDckMsSUFBSSxFQUFFO1lBQ0wsS0FBSyxFQUFFLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2xDLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUM7WUFDMUIsV0FBVyxFQUFFLElBQUksQ0FBQyxlQUFlLElBQUksQ0FBQztZQUN0QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsb0JBQW9CLElBQUksQ0FBQztZQUNoRCxNQUFNLEVBQUUsYUFBYSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7U0FDdEM7S0FDRCxDQUFDO0FBQ0gsQ0FBQyxFQUNELFVBQUMsTUFBTSxFQUFFLE1BQU07SUFDZCxJQUFNLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSyxDQUFDO0lBQzFCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDO0lBQzdCLElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRXZELElBQU0sY0FBYyxHQUFtQjtRQUN0QyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUk7UUFDakIsWUFBWSxFQUFFLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDN0MsSUFBSSxFQUFFLGVBQWUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3ZDLElBQUksRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUNuQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDO0tBQzFCLENBQUM7SUFFRixJQUFNLGNBQWMsR0FBbUI7UUFDdEMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BDLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUM7UUFDMUIsZUFBZSxFQUFFLElBQUksQ0FBQyxXQUFXLElBQUksQ0FBQztRQUN0QyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLElBQUksQ0FBQztRQUNoRCxVQUFVLEVBQUUsZUFBZSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7S0FDeEMsQ0FBQztJQUVGLHNCQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVTtJQUVqQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzNCLHdCQUFZLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztLQUN4QztJQUVELHNCQUFVLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsZUFBZTtJQUN2QyxzQkFBVSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLDBCQUEwQjtJQUVsRCxxQ0FBd0IsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxjQUFjLENBQUMsQ0FBQztJQUU3RCxzQkFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWU7SUFDdEMsc0JBQVUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQywwQkFBMEI7SUFFbEQscUNBQXdCLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFFN0Qsc0JBQVUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuQyxzQkFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLHNCQUFVLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDcEMsc0JBQVUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN0QyxDQUFDLENBQ0QsQ0FBQztBQUVGLFVBQVUsQ0FDVCxNQUFNLEVBQ04sVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsSUFBSSxLQUFLLFNBQVMsRUFBekIsQ0FBeUIsRUFDbkMsVUFBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUk7SUFDcEIsTUFBTSxDQUFDLElBQUksR0FBRyw2QkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN4QyxxQkFBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsaUJBQWlCO0FBQzdDLENBQUMsRUFDRCxVQUFDLE1BQU0sRUFBRSxNQUFNO0lBQ2QsOEJBQWtCLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxJQUFLLENBQUMsQ0FBQztBQUMxQyxDQUFDLENBQ0QsQ0FBQztBQUVGLFVBQVUsQ0FDVCxNQUFNLEVBQ04sVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsVUFBVSxLQUFLLFNBQVMsRUFBL0IsQ0FBK0IsRUFDekMsVUFBQyxNQUFNLEVBQUUsTUFBTSxJQUFLLE9BQUEsTUFBTSxDQUFDLFVBQVUsR0FBRyx5QkFBYSxDQUFDLE1BQU0sQ0FBQyxFQUF6QyxDQUF5QyxFQUM3RCxVQUFDLE1BQU0sRUFBRSxNQUFNLElBQUssT0FBQSwwQkFBYyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsVUFBVyxDQUFDLEVBQTFDLENBQTBDLENBQzlELENBQUM7QUFFRixVQUFVLENBQ1QsTUFBTSxFQUNOLFVBQUEsTUFBTSxJQUFJLE9BQUEsTUFBTSxDQUFDLEVBQUUsS0FBSyxTQUFTLEVBQXZCLENBQXVCLEVBQ2pDLFVBQUMsTUFBTSxFQUFFLE1BQU0sSUFBSyxPQUFBLE1BQU0sQ0FBQyxFQUFFLEdBQUcsc0JBQVUsQ0FBQyxNQUFNLENBQUMsRUFBOUIsQ0FBOEIsRUFDbEQsVUFBQyxNQUFNLEVBQUUsTUFBTSxJQUFLLE9BQUEsdUJBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUcsQ0FBQyxFQUEvQixDQUErQixDQUNuRCxDQUFDO0FBRUYsVUFBVSxDQUNULE1BQU0sRUFDTixVQUFBLE1BQU0sSUFBSSxPQUFBLE1BQU0sQ0FBQyxxQkFBcUIsS0FBSyxTQUFTLEVBQTFDLENBQTBDLEVBQ3BELFVBQUMsTUFBTSxFQUFFLE1BQU07SUFDZCxNQUFNLENBQUMscUJBQXFCLEdBQUcsQ0FBQyxDQUFDLHFCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkQscUJBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEIsQ0FBQyxFQUNELFVBQUMsTUFBTSxFQUFFLE1BQU07SUFDZCxzQkFBVSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekQsc0JBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdkIsQ0FBQyxDQUNELENBQUM7QUFFRixVQUFVLENBQ1QsTUFBTSxFQUNOLFVBQUEsTUFBTSxJQUFJLE9BQUEsTUFBTSxDQUFDLHFCQUFxQixLQUFLLFNBQVMsRUFBMUMsQ0FBMEMsRUFDcEQsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLE1BQU0sQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLENBQUMscUJBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuRCxxQkFBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN0QixDQUFDLEVBQ0QsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLHNCQUFVLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6RCxzQkFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN2QixDQUFDLENBQ0QsQ0FBQztBQUVGLFVBQVUsQ0FDVCxNQUFNLEVBQ04sVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsUUFBUSxLQUFLLFNBQVMsRUFBN0IsQ0FBNkIsRUFDdkMsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLHFCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEMscUJBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEIsQ0FBQyxFQUNELFVBQUMsTUFBTSxFQUFFLE1BQU07SUFDZCxzQkFBVSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVDLHNCQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCLENBQUMsQ0FDRCxDQUFDO0FBRUYsVUFBVSxDQUNULE1BQU0sRUFDTixVQUFBLE1BQU0sSUFBSSxPQUFBLE1BQU0sQ0FBQyxTQUFTLEtBQUssU0FBUyxFQUE5QixDQUE4QixFQUN4QyxVQUFDLE1BQU0sRUFBRSxNQUFNO0lBQ2QsSUFBTSxLQUFLLEdBQUcsc0JBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqQyxNQUFNLENBQUMsU0FBUyxHQUFHO1FBQ2xCLFlBQVksRUFBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2xDLFNBQVMsRUFBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQy9CLFFBQVEsRUFBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0tBQzlCLENBQUM7QUFDSCxDQUFDLEVBQ0QsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLElBQU0sS0FBSyxHQUNWLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNDLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLENBQUMsTUFBTSxDQUFDLFNBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFekMsdUJBQVcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDNUIsQ0FBQyxDQUNELENBQUM7QUFFRixVQUFVLENBQ1QsTUFBTSxFQUNOLFVBQUEsTUFBTSxJQUFJLE9BQUEsTUFBTSxDQUFDLFdBQVcsS0FBSyxTQUFTLEVBQWhDLENBQWdDLEVBQzFDLFVBQUMsTUFBTSxFQUFFLE1BQU07SUFDZCxNQUFNLENBQUMsV0FBVyxHQUFHO1FBQ3BCLE1BQU0sRUFBRSxzQkFBVSxDQUFDLE1BQU0sQ0FBQztRQUMxQixNQUFNLEVBQUUsc0JBQVUsQ0FBQyxNQUFNLENBQUM7S0FDMUIsQ0FBQztBQUNILENBQUMsRUFDRCxVQUFDLE1BQU0sRUFBRSxNQUFNO0lBQ2QsdUJBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLFdBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoRCx1QkFBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsV0FBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2pELENBQUMsQ0FDRCxDQUFDO0FBRUYsVUFBVSxDQUNULE1BQU0sRUFDTixVQUFBLE1BQU0sSUFBSSxPQUFBLE1BQU0sQ0FBQyxRQUFRLEtBQUssU0FBUyxFQUE3QixDQUE2QixFQUN2QyxVQUFDLE1BQU0sRUFBRSxNQUFNO0lBQ2QsSUFBTSxLQUFLLEdBQUcsc0JBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqQyxNQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUVyQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQy9CLElBQU0sU0FBUyxHQUFHLHlCQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFeEMsSUFBSSxTQUFTLEtBQUssTUFBTTtZQUN2QixNQUFNLElBQUksS0FBSyxDQUFDLHlCQUF1QixTQUFTLE1BQUcsQ0FBQyxDQUFDO1FBRXRELElBQU0sR0FBRyxHQUFHLHlCQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbEMsSUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLHFCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakMscUJBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckIsSUFBTSxRQUFNLEdBQUcsc0JBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsQyxJQUFNLElBQUksR0FBRyxpQkFBTyxDQUFDLHFCQUFTLENBQUMsTUFBTSxFQUFFLFFBQU0sQ0FBQyxDQUFDLENBQUM7UUFDaEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEtBQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxDQUFDLENBQUM7S0FDMUM7QUFDRixDQUFDLEVBQ0QsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLHVCQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxRQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFN0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxRQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2pELElBQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxRQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakMsMEJBQWMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0IsMEJBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pDLHNCQUFVLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsc0JBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEIsdUJBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0QyxzQkFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztLQUM5QztBQUNGLENBQUMsQ0FDRCxDQUFDO0FBRUYsVUFBVSxDQUNULE1BQU0sRUFDTixVQUFBLE1BQU0sSUFBSSxPQUFBLE1BQU0sQ0FBQyxjQUFjLEtBQUssU0FBUyxFQUFuQyxDQUFtQyxFQUM3QyxVQUFDLE1BQU0sRUFBRSxNQUFNO0lBQ2QsTUFBTSxDQUFDLGNBQWMsR0FBRztRQUN2QixDQUFDLEVBQUUsdUJBQVcsQ0FBQyxNQUFNLENBQUM7UUFDdEIsQ0FBQyxFQUFFLHVCQUFXLENBQUMsTUFBTSxDQUFDO0tBQ3RCLENBQUM7QUFDSCxDQUFDLEVBQ0QsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLHdCQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxjQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0Msd0JBQVksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLGNBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRCxDQUFDLENBQ0QsQ0FBQztBQUVGLFVBQVUsQ0FDVCxNQUFNLEVBQ04sVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsY0FBYyxLQUFLLFNBQVMsRUFBbkMsQ0FBbUMsRUFDN0MsVUFBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUk7SUFDcEIsSUFBTSxJQUFJLEdBQVEsRUFBRSxDQUFDO0lBRXJCLElBQUksQ0FBQyxJQUFJLEdBQUcsc0JBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUUvQixJQUFJLElBQUksRUFBRSxFQUFFO1FBQ1gsSUFBTSxTQUFTLEdBQUcseUJBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV4QyxJQUFJLFNBQVMsS0FBSyxNQUFNO1lBQ3ZCLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXVCLFNBQVMsTUFBRyxDQUFDLENBQUM7UUFFdEQsSUFBSSxDQUFDLEdBQUcsR0FBRyx5QkFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ2pDO0lBRUQsSUFBSSxJQUFJLEVBQUUsRUFBRTtRQUNYLGFBQWE7UUFDYixtREFBbUQ7UUFDbkQsSUFBSSxDQUFDLE9BQU8sR0FBRyxzQkFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ2xDO0lBRUQsTUFBTSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7QUFDOUIsQ0FBQyxFQUNELFVBQUMsTUFBTSxFQUFFLE1BQU07SUFDZCx1QkFBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsY0FBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRWpELElBQUksTUFBTSxDQUFDLGNBQWUsQ0FBQyxHQUFHLEVBQUU7UUFDL0IsMEJBQWMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0IsMEJBQWMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLGNBQWUsQ0FBQyxHQUFJLENBQUMsQ0FBQztRQUVwRCxJQUFJLE1BQU0sQ0FBQyxjQUFlLENBQUMsT0FBTyxLQUFLLFNBQVM7WUFDL0MsdUJBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLGNBQWUsQ0FBQyxPQUFRLENBQUMsQ0FBQztLQUN0RDtBQUNGLENBQUMsQ0FDRCxDQUFDO0FBRUYsVUFBVSxDQUNULE1BQU0sRUFDTixVQUFBLE1BQU0sSUFBSSxPQUFBLE1BQU0sQ0FBQyxPQUFPLEtBQUssU0FBUyxFQUE1QixDQUE0QixFQUN0QyxVQUFDLE1BQU0sRUFBRSxNQUFNO0lBQ2QsTUFBTSxDQUFDLE9BQU8sR0FBRyxzQkFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3JDLENBQUMsRUFDRCxVQUFDLE1BQU0sRUFBRSxNQUFNO0lBQ2QsdUJBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLE9BQVEsQ0FBQyxDQUFDO0FBQ3RDLENBQUMsQ0FDRCxDQUFDO0FBRUYsVUFBVSxDQUNULE1BQU0sRUFDTixVQUFBLE1BQU0sSUFBSSxPQUFBLE1BQU0sQ0FBQyxPQUFPLEtBQUssU0FBUyxFQUE1QixDQUE0QixFQUN0QyxVQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSTtJQUNwQixNQUFNLENBQUMsT0FBTyxHQUFHLDRCQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDckMscUJBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLGlCQUFpQjtBQUM3QyxDQUFDLEVBQ0QsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLDZCQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxPQUFRLENBQUMsQ0FBQztBQUN2QyxDQUFDLENBQ0QsQ0FBQztBQUVGLGNBQWM7QUFDZCxXQUFXO0FBQ1gsd0VBQXdFO0FBQ3hFLCtCQUErQjtBQUMvQixzREFBc0Q7QUFDdEQsNERBQTREO0FBQzVELHlFQUF5RTtBQUN6RSxNQUFNO0FBQ04seUJBQXlCO0FBQ3pCLCtHQUErRztBQUMvRyxNQUFNO0FBQ04sS0FBSztBQUVMLFVBQVUsQ0FDVCxNQUFNLEVBQ04sVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsVUFBVSxLQUFLLFNBQVMsRUFBL0IsQ0FBK0IsRUFDekMsVUFBQyxNQUFNLEVBQUUsTUFBTTtJQUNkLE1BQU0sQ0FBQyxVQUFVLEdBQUc7UUFDbkIsVUFBVSxFQUFFLG1CQUFTLENBQUMsTUFBTSxDQUFDO1FBQzdCLE9BQU8sRUFBRSxzQkFBVSxDQUFDLE1BQU0sQ0FBQztLQUMzQixDQUFDO0FBQ0gsQ0FBQyxFQUNELFVBQUMsTUFBTSxFQUFFLE1BQU07SUFDZCxzQkFBVSxDQUFDLE1BQU0sRUFBRSxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDbEUsdUJBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLFVBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNqRCxDQUFDLENBQ0QsQ0FBQztBQUVGLGtCQUFrQjtBQUNsQixVQUFVLENBQ1QsTUFBTSxFQUNOLFVBQUEsTUFBTSxJQUFJLE9BQUEsQ0FBQyxNQUFNLEVBQVAsQ0FBTyxFQUFFLG9EQUFvRDtBQUN2RSxVQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsSUFBSTtJQUNyQixxQkFBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQzFCLHNDQUFzQztJQUN0QyxnREFBZ0Q7SUFFaEQsMkNBQTJDO0lBQzNDLCtDQUErQztJQUMvQyx5Q0FBeUM7SUFFekMsd0NBQXdDO0lBQ3hDLDRCQUE0QjtJQUM1QiwyQ0FBMkM7SUFDM0MsNkJBQTZCO0lBRTdCLEdBQUc7SUFFSCx3Q0FBd0M7SUFDeEMsV0FBVztJQUNYLHFCQUFxQjtJQUNyQixnQkFBZ0I7SUFDaEIsU0FBUztJQUNULFlBQVk7SUFDWixTQUFTO0lBQ1QsS0FBSztJQUNMLElBQUk7QUFDTCxDQUFDLEVBQ0QsVUFBQyxPQUFPLEVBQUUsT0FBTztJQUNoQixLQUFLO0FBQ04sQ0FBQyxDQUNELENBQUMiLCJmaWxlIjoiYWRkaXRpb25hbEluZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWFkRWZmZWN0cywgd3JpdGVFZmZlY3RzIH0gZnJvbSAnLi9lZmZlY3RzSGVscGVycyc7XG5pbXBvcnQgeyByZWFkQ29sb3IsIHRvQXJyYXkgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgTGF5ZXJBZGRpdGlvbmFsSW5mbywgVGV4dEdyaWRkaW5nLCBPcmllbnRhdGlvbiwgV2FycFN0eWxlLCBBbnRpYWxpYXMgfSBmcm9tICcuL3BzZCc7XG5pbXBvcnQge1xuXHRQc2RSZWFkZXIsIHJlYWRTaWduYXR1cmUsIHJlYWRVbmljb2RlU3RyaW5nLCBza2lwQnl0ZXMsIHJlYWRVaW50MzIsIHJlYWRVaW50OCwgcmVhZEZsb2F0NjQsIHJlYWRVaW50MTYsXG5cdHJlYWRCeXRlcywgcmVhZEludDMyLCByZWFkSW50MTZcbn0gZnJvbSAnLi9wc2RSZWFkZXInO1xuaW1wb3J0IHtcblx0UHNkV3JpdGVyLCB3cml0ZVplcm9zLCB3cml0ZVVuaWNvZGVTdHJpbmcsIHdyaXRlU2lnbmF0dXJlLCB3cml0ZUJ5dGVzLCB3cml0ZVVpbnQzMiwgd3JpdGVVaW50MTYsXG5cdHdyaXRlRmxvYXQ2NCwgd3JpdGVVaW50OCwgd3JpdGVJbnQxNiwgd3JpdGVJbnQzMlxufSBmcm9tICcuL3BzZFdyaXRlcic7XG5pbXBvcnQgeyByZWFkRGVzY3JpcHRvclN0cnVjdHVyZSwgd3JpdGVEZXNjcmlwdG9yU3RydWN0dXJlIH0gZnJvbSAnLi9kZXNjcmlwdG9yJztcblxuZXhwb3J0IGludGVyZmFjZSBJbmZvSGFuZGxlciB7XG5cdGtleTogc3RyaW5nO1xuXHRoYXM6ICh0YXJnZXQ6IExheWVyQWRkaXRpb25hbEluZm8pID0+IGJvb2xlYW47XG5cdHJlYWQ6IChyZWFkZXI6IFBzZFJlYWRlciwgdGFyZ2V0OiBMYXllckFkZGl0aW9uYWxJbmZvLCBsZWZ0OiAoKSA9PiBudW1iZXIpID0+IHZvaWQ7XG5cdHdyaXRlOiAod3JpdGVyOiBQc2RXcml0ZXIsIHRhcmdldDogTGF5ZXJBZGRpdGlvbmFsSW5mbykgPT4gdm9pZDtcbn1cblxuY29uc3QgaGFuZGxlcnM6IEluZm9IYW5kbGVyW10gPSBbXTtcbmNvbnN0IGhhbmRsZXJzTWFwOiB7IFtrZXk6IHN0cmluZ106IEluZm9IYW5kbGVyIH0gPSB7fTtcblxuZnVuY3Rpb24gYWRkSGFuZGxlcihcblx0a2V5OiBzdHJpbmcsXG5cdGhhczogKHRhcmdldDogTGF5ZXJBZGRpdGlvbmFsSW5mbykgPT4gYm9vbGVhbixcblx0cmVhZDogKHJlYWRlcjogUHNkUmVhZGVyLCB0YXJnZXQ6IExheWVyQWRkaXRpb25hbEluZm8sIGxlZnQ6ICgpID0+IG51bWJlcikgPT4gdm9pZCxcblx0d3JpdGU6ICh3cml0ZXI6IFBzZFdyaXRlciwgdGFyZ2V0OiBMYXllckFkZGl0aW9uYWxJbmZvKSA9PiB2b2lkLFxuKSB7XG5cdGNvbnN0IGhhbmRsZXI6IEluZm9IYW5kbGVyID0geyBrZXksIGhhcywgcmVhZCwgd3JpdGUgfTtcblx0aGFuZGxlcnMucHVzaChoYW5kbGVyKTtcblx0aGFuZGxlcnNNYXBbaGFuZGxlci5rZXldID0gaGFuZGxlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmRsZXIoa2V5OiBzdHJpbmcpIHtcblx0cmV0dXJuIGhhbmRsZXJzTWFwW2tleV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRIYW5kbGVycygpIHtcblx0cmV0dXJuIGhhbmRsZXJzO1xufVxuXG5pbnRlcmZhY2UgVGV4dERlc2NyaXB0b3Ige1xuXHQnVHh0ICc6IHN0cmluZztcblx0dGV4dEdyaWRkaW5nOiBzdHJpbmc7XG5cdE9ybnQ6IHN0cmluZztcblx0QW50QTogc3RyaW5nO1xuXHRUZXh0SW5kZXg6IG51bWJlcjtcblx0RW5naW5lRGF0YT86IFVpbnQ4QXJyYXk7XG59XG5cbmludGVyZmFjZSBXYXJwRGVzY3JpcHRvciB7XG5cdHdhcnBTdHlsZTogc3RyaW5nO1xuXHR3YXJwVmFsdWU6IG51bWJlcjtcblx0d2FycFBlcnNwZWN0aXZlOiBudW1iZXI7XG5cdHdhcnBQZXJzcGVjdGl2ZU90aGVyOiBudW1iZXI7XG5cdHdhcnBSb3RhdGU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIERpY3Qge1xuXHRba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIHJldk1hcChtYXA6IERpY3QpIHtcblx0Y29uc3QgcmVzdWx0OiBEaWN0ID0ge307XG5cdE9iamVjdC5rZXlzKG1hcCkuZm9yRWFjaChrZXkgPT4gcmVzdWx0W21hcFtrZXldXSA9IGtleSk7XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHRleHRHcmlkZGluZy5Ob25lXG5jb25zdCB0ZXh0R3JpZGRpbmc6IERpY3QgPSB7XG5cdG5vbmU6ICdOb25lJyxcbn07XG5cbmNvbnN0IHRleHRHcmlkZGluZ1JldiA9IHJldk1hcCh0ZXh0R3JpZGRpbmcpO1xuXG5mdW5jdGlvbiB0b1RleHRHcmlkZGluZyh2YWx1ZTogc3RyaW5nKTogVGV4dEdyaWRkaW5nIHtcblx0cmV0dXJuICh0ZXh0R3JpZGRpbmdSZXZbdmFsdWUuc3BsaXQoJy4nKVsxXV0gYXMgYW55KSB8fCAnbm9uZSc7XG59XG5cbmZ1bmN0aW9uIGZyb21UZXh0R3JpZGRpbmcodmFsdWU6IFRleHRHcmlkZGluZyB8IHVuZGVmaW5lZCkge1xuXHRyZXR1cm4gYHRleHRHcmlkZGluZy4ke3RleHRHcmlkZGluZ1t2YWx1ZSFdIHx8ICdOb25lJ31gO1xufVxuXG4vLyBPcm50Lkhyem4gfCBPcm50LlZydGNcbmNvbnN0IE9ybnQ6IERpY3QgPSB7XG5cdGhvcml6b250YWw6ICdIcnpuJyxcblx0dmVydGljYWw6ICdWcnRjJyxcbn07XG5cbmNvbnN0IE9ybnRSZXYgPSByZXZNYXAoT3JudCk7XG5cbmZ1bmN0aW9uIHRvT3JpZW50YXRpb24odmFsdWU6IHN0cmluZyk6IE9yaWVudGF0aW9uIHtcblx0cmV0dXJuIChPcm50UmV2W3ZhbHVlLnNwbGl0KCcuJylbMV1dIGFzIGFueSkgfHwgJ2hvcml6b250YWwnO1xufVxuXG5mdW5jdGlvbiBmcm9tT3JpZW50YXRpb24odmFsdWU6IE9yaWVudGF0aW9uIHwgdW5kZWZpbmVkKSB7XG5cdHJldHVybiBgdGV4dEdyaWRkaW5nLiR7T3JudFt2YWx1ZSFdIHx8ICdIcnpuJ31gO1xufVxuXG4vLyBBbm50LmFudGlBbGlhc1NoYXJwIHwgQW5udC5Bbm5vIHwgQW5udC5BbkNyIHwgQW5udC5BblN0IHwgQW5udC5BblNtXG5jb25zdCBBbm50OiBEaWN0ID0ge1xuXHRub25lOiAnQW5ubycsXG5cdHNoYXJwOiAnYW50aUFsaWFzU2hhcnAnLFxuXHRjcmlzcDogJ0FuQ3InLFxuXHRzdHJvbmc6ICdBblN0Jyxcblx0c21vb3RoOiAnQW5TbScsXG59O1xuXG5jb25zdCBBbm50UmV2ID0gcmV2TWFwKEFubnQpO1xuXG5mdW5jdGlvbiB0b0FudGlhbGlhcyh2YWx1ZTogc3RyaW5nKTogQW50aWFsaWFzIHtcblx0cmV0dXJuIChBbm50UmV2W3ZhbHVlLnNwbGl0KCcuJylbMV1dIGFzIGFueSkgfHwgJ25vbmUnO1xufVxuXG5mdW5jdGlvbiBmcm9tQW50aWFsaWFzKHZhbHVlOiBBbnRpYWxpYXMgfCB1bmRlZmluZWQpIHtcblx0cmV0dXJuIGBBbm50LiR7QW5udFt2YWx1ZSFdIHx8ICdBbm5vJ31gO1xufVxuXG4vLyB3YXJwU3R5bGUud2FycE5vbmUgfCB3YXJwU3R5bGUud2FycEFyYyB8IHdhcnBTdHlsZS53YXJwQXJjTG93ZXIgfCB3YXJwU3R5bGUud2FycEFyY1VwcGVyIHwgd2FycFN0eWxlLndhcnBBcmNoXG4vLyB3YXJwU3R5bGUud2FycEJ1bGdlIHwgd2FycFN0eWxlLndhcnBTaGVsbExvd2VyIHwgd2FycFN0eWxlLndhcnBTaGVsbFVwcGVyIHwgd2FycFN0eWxlLndhcnBGbGFnXG4vLyB3YXJwU3R5bGUud2FycFdhdmUgfCB3YXJwU3R5bGUud2FycEZpc2ggfCB3YXJwU3R5bGUud2FycFJpc2UgfCB3YXJwU3R5bGUud2FycEZpc2hleWUgfFxuLy8gd2FycFN0eWxlLndhcnBJbmZsYXRlIHwgd2FycFN0eWxlLndhcnBTcXVlZXplIHwgd2FycFN0eWxlLndhcnBUd2lzdFxuY29uc3Qgd2FycFN0eWxlOiBEaWN0ID0ge1xuXHRub25lOiAnd2FycE5vbmUnLFxuXHRhcmM6ICd3YXJwQXJjJyxcblx0YXJjTG93ZXI6ICd3YXJwQXJjTG93ZXInLFxuXHRhcmNVcHBlcjogJ3dhcnBBcmNVcHBlcicsXG5cdGFyY2g6ICd3YXJwQXJjaCcsXG5cdGJ1bGdlOiAnd2FycEJ1bGdlJyxcblx0c2hlbGxMb3dlcjogJ3dhcnBTaGVsbExvd2VyJyxcblx0c2hlbGxVcHBlcjogJ3dhcnBTaGVsbFVwcGVyJyxcblx0ZmxhZzogJ3dhcnBGbGFnJyxcblx0d2F2ZTogJ3dhcnBXYXZlJyxcblx0ZmlzaDogJ3dhcnBGaXNoJyxcblx0cmlzZTogJ3dhcnBSaXNlJyxcblx0ZmlzaGV5ZTogJ3dhcnBGaXNoZXllJyxcblx0aW5mbGF0ZTogJ3dhcnBJbmZsYXRlJyxcblx0c3F1ZWV6ZTogJ3dhcnBTcXVlZXplJyxcblx0dHdpc3Q6ICd3YXJwVHdpc3QnLFxufTtcblxuY29uc3Qgd2FycFN0eWxlUmV2ID0gcmV2TWFwKHdhcnBTdHlsZSk7XG5cbmZ1bmN0aW9uIHRvV2FycFN0eWxlKHZhbHVlOiBzdHJpbmcpOiBXYXJwU3R5bGUge1xuXHRyZXR1cm4gKHdhcnBTdHlsZVJldlt2YWx1ZS5zcGxpdCgnLicpWzFdXSBhcyBhbnkpIHx8ICdub25lJztcbn1cblxuZnVuY3Rpb24gZnJvbVdhcnBTdHlsZSh2YWx1ZTogV2FycFN0eWxlIHwgdW5kZWZpbmVkKSB7XG5cdHJldHVybiBgd2FycFN0eWxlLiR7d2FycFN0eWxlW3ZhbHVlIV0gfHwgJ3dhcnBOb25lJ31gO1xufVxuXG5hZGRIYW5kbGVyKFxuXHQnVHlTaCcsXG5cdHRhcmdldCA9PiB0YXJnZXQudGV4dCAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQpID0+IHtcblx0XHRjb25zdCB2ZXJzaW9uID0gcmVhZEludDE2KHJlYWRlcik7XG5cblx0XHRpZiAodmVyc2lvbiAhPT0gMSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFR5U2ggdmVyc2lvbjogJHt2ZXJzaW9ufWApO1xuXHRcdH1cblxuXHRcdGNvbnN0IHRyYW5zZm9ybSA9IFtcblx0XHRcdHJlYWRGbG9hdDY0KHJlYWRlciksXG5cdFx0XHRyZWFkRmxvYXQ2NChyZWFkZXIpLFxuXHRcdFx0cmVhZEZsb2F0NjQocmVhZGVyKSxcblx0XHRcdHJlYWRGbG9hdDY0KHJlYWRlciksXG5cdFx0XHRyZWFkRmxvYXQ2NChyZWFkZXIpLFxuXHRcdFx0cmVhZEZsb2F0NjQocmVhZGVyKSxcblx0XHRdO1xuXG5cdFx0Y29uc3QgdGV4dFZlcnNpb24gPSByZWFkSW50MTYocmVhZGVyKTtcblx0XHRjb25zdCBkZXNjcmlwdG9yVmVyc2lvbiA9IHJlYWRJbnQzMihyZWFkZXIpO1xuXG5cdFx0aWYgKHRleHRWZXJzaW9uICE9PSA1MCB8fCBkZXNjcmlwdG9yVmVyc2lvbiAhPT0gMTYpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBUeVNoIHRleHQgdmVyc2lvbjogJHt0ZXh0VmVyc2lvbn0vJHtkZXNjcmlwdG9yVmVyc2lvbn1gKTtcblx0XHR9XG5cblx0XHRjb25zdCB0ZXh0OiBUZXh0RGVzY3JpcHRvciA9IHJlYWREZXNjcmlwdG9yU3RydWN0dXJlKHJlYWRlcik7XG5cblx0XHQvLyBjb25zb2xlLmxvZygnRW5naW5lRGF0YTonLCBKU09OLnN0cmluZ2lmeShwYXJzZUVuZ2luZURhdGEodGV4dC5FbmdpbmVEYXRhKSwgbnVsbCwgMiksICdcXG4nKTtcblxuXHRcdGNvbnN0IHdhcnBWZXJzaW9uID0gcmVhZEludDE2KHJlYWRlcik7XG5cdFx0Y29uc3Qgd2FycERlc2NyaXB0b3JWZXJzaW9uID0gcmVhZEludDMyKHJlYWRlcik7XG5cblx0XHRpZiAod2FycFZlcnNpb24gIT09IDEgfHwgd2FycERlc2NyaXB0b3JWZXJzaW9uICE9PSAxNikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFR5U2ggd2FycCB2ZXJzaW9uOiAke3dhcnBWZXJzaW9ufSAke3dhcnBEZXNjcmlwdG9yVmVyc2lvbn1gKTtcblx0XHR9XG5cblx0XHRjb25zdCB3YXJwOiBXYXJwRGVzY3JpcHRvciA9IHJlYWREZXNjcmlwdG9yU3RydWN0dXJlKHJlYWRlcik7XG5cblx0XHRjb25zdCBsZWZ0ID0gcmVhZEludDMyKHJlYWRlcik7XG5cdFx0Y29uc3QgdG9wID0gcmVhZEludDMyKHJlYWRlcik7XG5cdFx0Y29uc3QgcmlnaHQgPSByZWFkSW50MzIocmVhZGVyKTtcblx0XHRjb25zdCBib3R0b20gPSByZWFkSW50MzIocmVhZGVyKTtcblxuXHRcdHRhcmdldC50ZXh0ID0ge1xuXHRcdFx0dHJhbnNmb3JtLCBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20sXG5cdFx0XHR0ZXh0OiB0ZXh0WydUeHQgJ10sXG5cdFx0XHRpbmRleDogdGV4dC5UZXh0SW5kZXggfHwgMCxcblx0XHRcdGdyaWRkaW5nOiB0b1RleHRHcmlkZGluZyh0ZXh0LnRleHRHcmlkZGluZyksXG5cdFx0XHRhbnRpYWxpYXM6IHRvQW50aWFsaWFzKHRleHQuQW50QSksXG5cdFx0XHRvcmllbnRhdGlvbjogdG9PcmllbnRhdGlvbih0ZXh0Lk9ybnQpLFxuXHRcdFx0d2FycDoge1xuXHRcdFx0XHRzdHlsZTogdG9XYXJwU3R5bGUod2FycC53YXJwU3R5bGUpLFxuXHRcdFx0XHR2YWx1ZTogd2FycC53YXJwVmFsdWUgfHwgMCxcblx0XHRcdFx0cGVyc3BlY3RpdmU6IHdhcnAud2FycFBlcnNwZWN0aXZlIHx8IDAsXG5cdFx0XHRcdHBlcnNwZWN0aXZlT3RoZXI6IHdhcnAud2FycFBlcnNwZWN0aXZlT3RoZXIgfHwgMCxcblx0XHRcdFx0cm90YXRlOiB0b09yaWVudGF0aW9uKHdhcnAud2FycFJvdGF0ZSksXG5cdFx0XHR9LFxuXHRcdH07XG5cdH0sXG5cdCh3cml0ZXIsIHRhcmdldCkgPT4ge1xuXHRcdGNvbnN0IHRleHQgPSB0YXJnZXQudGV4dCE7XG5cdFx0Y29uc3Qgd2FycCA9IHRleHQud2FycCB8fCB7fTtcblx0XHRjb25zdCB0cmFuc2Zvcm0gPSB0ZXh0LnRyYW5zZm9ybSB8fCBbMSwgMCwgMCwgMSwgMCwgMF07XG5cblx0XHRjb25zdCB0ZXh0RGVzY3JpcHRvcjogVGV4dERlc2NyaXB0b3IgPSB7XG5cdFx0XHQnVHh0ICc6IHRleHQudGV4dCxcblx0XHRcdHRleHRHcmlkZGluZzogZnJvbVRleHRHcmlkZGluZyh0ZXh0LmdyaWRkaW5nKSxcblx0XHRcdE9ybnQ6IGZyb21PcmllbnRhdGlvbih0ZXh0Lm9yaWVudGF0aW9uKSxcblx0XHRcdEFudEE6IGZyb21BbnRpYWxpYXModGV4dC5hbnRpYWxpYXMpLFxuXHRcdFx0VGV4dEluZGV4OiB0ZXh0LmluZGV4IHx8IDAsXG5cdFx0fTtcblxuXHRcdGNvbnN0IHdhcnBEZXNjcmlwdG9yOiBXYXJwRGVzY3JpcHRvciA9IHtcblx0XHRcdHdhcnBTdHlsZTogZnJvbVdhcnBTdHlsZSh3YXJwLnN0eWxlKSxcblx0XHRcdHdhcnBWYWx1ZTogd2FycC52YWx1ZSB8fCAwLFxuXHRcdFx0d2FycFBlcnNwZWN0aXZlOiB3YXJwLnBlcnNwZWN0aXZlIHx8IDAsXG5cdFx0XHR3YXJwUGVyc3BlY3RpdmVPdGhlcjogd2FycC5wZXJzcGVjdGl2ZU90aGVyIHx8IDAsXG5cdFx0XHR3YXJwUm90YXRlOiBmcm9tT3JpZW50YXRpb24od2FycC5yb3RhdGUpLFxuXHRcdH07XG5cblx0XHR3cml0ZUludDE2KHdyaXRlciwgMSk7IC8vIHZlcnNpb25cblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG5cdFx0XHR3cml0ZUZsb2F0NjQod3JpdGVyLCB0cmFuc2Zvcm1baV0gfHwgMCk7XG5cdFx0fVxuXG5cdFx0d3JpdGVJbnQxNih3cml0ZXIsIDUwKTsgLy8gdGV4dCB2ZXJzaW9uXG5cdFx0d3JpdGVJbnQzMih3cml0ZXIsIDE2KTsgLy8gdGV4dCBkZXNjcmlwdG9yIHZlcnNpb25cblxuXHRcdHdyaXRlRGVzY3JpcHRvclN0cnVjdHVyZSh3cml0ZXIsICcnLCAnVHhMcicsIHRleHREZXNjcmlwdG9yKTtcblxuXHRcdHdyaXRlSW50MTYod3JpdGVyLCAxKTsgLy8gd2FycCB2ZXJzaW9uXG5cdFx0d3JpdGVJbnQzMih3cml0ZXIsIDE2KTsgLy8gd2FycCBkZXNjcmlwdG9yIHZlcnNpb25cblxuXHRcdHdyaXRlRGVzY3JpcHRvclN0cnVjdHVyZSh3cml0ZXIsICcnLCAnd2FycCcsIHdhcnBEZXNjcmlwdG9yKTtcblxuXHRcdHdyaXRlSW50MzIod3JpdGVyLCB0ZXh0LmxlZnQgfHwgMCk7XG5cdFx0d3JpdGVJbnQzMih3cml0ZXIsIHRleHQudG9wIHx8IDApO1xuXHRcdHdyaXRlSW50MzIod3JpdGVyLCB0ZXh0LnJpZ2h0IHx8IDApO1xuXHRcdHdyaXRlSW50MzIod3JpdGVyLCB0ZXh0LmJvdHRvbSB8fCAwKTtcblx0fSxcbik7XG5cbmFkZEhhbmRsZXIoXG5cdCdsdW5pJyxcblx0dGFyZ2V0ID0+IHRhcmdldC5uYW1lICE9PSB1bmRlZmluZWQsXG5cdChyZWFkZXIsIHRhcmdldCwgbGVmdCkgPT4ge1xuXHRcdHRhcmdldC5uYW1lID0gcmVhZFVuaWNvZGVTdHJpbmcocmVhZGVyKTtcblx0XHRza2lwQnl0ZXMocmVhZGVyLCBsZWZ0KCkpOyAvLyBURU1QOiBza2lwcGluZ1xuXHR9LFxuXHQod3JpdGVyLCB0YXJnZXQpID0+IHtcblx0XHR3cml0ZVVuaWNvZGVTdHJpbmcod3JpdGVyLCB0YXJnZXQubmFtZSEpO1xuXHR9XG4pO1xuXG5hZGRIYW5kbGVyKFxuXHQnbG5zcicsXG5cdHRhcmdldCA9PiB0YXJnZXQubmFtZVNvdXJjZSAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQpID0+IHRhcmdldC5uYW1lU291cmNlID0gcmVhZFNpZ25hdHVyZShyZWFkZXIpLFxuXHQod3JpdGVyLCB0YXJnZXQpID0+IHdyaXRlU2lnbmF0dXJlKHdyaXRlciwgdGFyZ2V0Lm5hbWVTb3VyY2UhKSxcbik7XG5cbmFkZEhhbmRsZXIoXG5cdCdseWlkJyxcblx0dGFyZ2V0ID0+IHRhcmdldC5pZCAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQpID0+IHRhcmdldC5pZCA9IHJlYWRVaW50MzIocmVhZGVyKSxcblx0KHdyaXRlciwgdGFyZ2V0KSA9PiB3cml0ZVVpbnQzMih3cml0ZXIsIHRhcmdldC5pZCEpLFxuKTtcblxuYWRkSGFuZGxlcihcblx0J2NsYmwnLFxuXHR0YXJnZXQgPT4gdGFyZ2V0LmJsZW5kQ2xpcHBlbmRFbGVtZW50cyAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQpID0+IHtcblx0XHR0YXJnZXQuYmxlbmRDbGlwcGVuZEVsZW1lbnRzID0gISFyZWFkVWludDgocmVhZGVyKTtcblx0XHRza2lwQnl0ZXMocmVhZGVyLCAzKTtcblx0fSxcblx0KHdyaXRlciwgdGFyZ2V0KSA9PiB7XG5cdFx0d3JpdGVVaW50OCh3cml0ZXIsIHRhcmdldC5ibGVuZENsaXBwZW5kRWxlbWVudHMgPyAxIDogMCk7XG5cdFx0d3JpdGVaZXJvcyh3cml0ZXIsIDMpO1xuXHR9LFxuKTtcblxuYWRkSGFuZGxlcihcblx0J2luZngnLFxuXHR0YXJnZXQgPT4gdGFyZ2V0LmJsZW5kSW50ZXJpb3JFbGVtZW50cyAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQpID0+IHtcblx0XHR0YXJnZXQuYmxlbmRJbnRlcmlvckVsZW1lbnRzID0gISFyZWFkVWludDgocmVhZGVyKTtcblx0XHRza2lwQnl0ZXMocmVhZGVyLCAzKTtcblx0fSxcblx0KHdyaXRlciwgdGFyZ2V0KSA9PiB7XG5cdFx0d3JpdGVVaW50OCh3cml0ZXIsIHRhcmdldC5ibGVuZEludGVyaW9yRWxlbWVudHMgPyAxIDogMCk7XG5cdFx0d3JpdGVaZXJvcyh3cml0ZXIsIDMpO1xuXHR9LFxuKTtcblxuYWRkSGFuZGxlcihcblx0J2tua28nLFxuXHR0YXJnZXQgPT4gdGFyZ2V0Lmtub2Nrb3V0ICE9PSB1bmRlZmluZWQsXG5cdChyZWFkZXIsIHRhcmdldCkgPT4ge1xuXHRcdHRhcmdldC5rbm9ja291dCA9ICEhcmVhZFVpbnQ4KHJlYWRlcik7XG5cdFx0c2tpcEJ5dGVzKHJlYWRlciwgMyk7XG5cdH0sXG5cdCh3cml0ZXIsIHRhcmdldCkgPT4ge1xuXHRcdHdyaXRlVWludDgod3JpdGVyLCB0YXJnZXQua25vY2tvdXQgPyAxIDogMCk7XG5cdFx0d3JpdGVaZXJvcyh3cml0ZXIsIDMpO1xuXHR9LFxuKTtcblxuYWRkSGFuZGxlcihcblx0J2xzcGYnLFxuXHR0YXJnZXQgPT4gdGFyZ2V0LnByb3RlY3RlZCAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQpID0+IHtcblx0XHRjb25zdCBmbGFncyA9IHJlYWRVaW50MzIocmVhZGVyKTtcblx0XHR0YXJnZXQucHJvdGVjdGVkID0ge1xuXHRcdFx0dHJhbnNwYXJlbmN5OiAoZmxhZ3MgJiAweDAxKSAhPT0gMCxcblx0XHRcdGNvbXBvc2l0ZTogKGZsYWdzICYgMHgwMikgIT09IDAsXG5cdFx0XHRwb3NpdGlvbjogKGZsYWdzICYgMHgwNCkgIT09IDAsXG5cdFx0fTtcblx0fSxcblx0KHdyaXRlciwgdGFyZ2V0KSA9PiB7XG5cdFx0Y29uc3QgZmxhZ3MgPVxuXHRcdFx0KHRhcmdldC5wcm90ZWN0ZWQhLnRyYW5zcGFyZW5jeSA/IDB4MDEgOiAwKSB8XG5cdFx0XHQodGFyZ2V0LnByb3RlY3RlZCEuY29tcG9zaXRlID8gMHgwMiA6IDApIHxcblx0XHRcdCh0YXJnZXQucHJvdGVjdGVkIS5wb3NpdGlvbiA/IDB4MDQgOiAwKTtcblxuXHRcdHdyaXRlVWludDMyKHdyaXRlciwgZmxhZ3MpO1xuXHR9LFxuKTtcblxuYWRkSGFuZGxlcihcblx0J2xjbHInLFxuXHR0YXJnZXQgPT4gdGFyZ2V0LnNoZWV0Q29sb3JzICE9PSB1bmRlZmluZWQsXG5cdChyZWFkZXIsIHRhcmdldCkgPT4ge1xuXHRcdHRhcmdldC5zaGVldENvbG9ycyA9IHtcblx0XHRcdGNvbG9yMTogcmVhZFVpbnQzMihyZWFkZXIpLFxuXHRcdFx0Y29sb3IyOiByZWFkVWludDMyKHJlYWRlciksXG5cdFx0fTtcblx0fSxcblx0KHdyaXRlciwgdGFyZ2V0KSA9PiB7XG5cdFx0d3JpdGVVaW50MzIod3JpdGVyLCB0YXJnZXQuc2hlZXRDb2xvcnMhLmNvbG9yMSk7XG5cdFx0d3JpdGVVaW50MzIod3JpdGVyLCB0YXJnZXQuc2hlZXRDb2xvcnMhLmNvbG9yMik7XG5cdH0sXG4pO1xuXG5hZGRIYW5kbGVyKFxuXHQnc2htZCcsXG5cdHRhcmdldCA9PiB0YXJnZXQubWV0YWRhdGEgIT09IHVuZGVmaW5lZCxcblx0KHJlYWRlciwgdGFyZ2V0KSA9PiB7XG5cdFx0Y29uc3QgY291bnQgPSByZWFkVWludDMyKHJlYWRlcik7XG5cdFx0dGFyZ2V0Lm1ldGFkYXRhID0gW107XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcblx0XHRcdGNvbnN0IHNpZ25hdHVyZSA9IHJlYWRTaWduYXR1cmUocmVhZGVyKTtcblxuXHRcdFx0aWYgKHNpZ25hdHVyZSAhPT0gJzhCSU0nKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2lnbmF0dXJlOiAnJHtzaWduYXR1cmV9J2ApO1xuXG5cdFx0XHRjb25zdCBrZXkgPSByZWFkU2lnbmF0dXJlKHJlYWRlcik7XG5cdFx0XHRjb25zdCBjb3B5ID0gISFyZWFkVWludDgocmVhZGVyKTtcblx0XHRcdHNraXBCeXRlcyhyZWFkZXIsIDMpO1xuXHRcdFx0Y29uc3QgbGVuZ3RoID0gcmVhZFVpbnQzMihyZWFkZXIpO1xuXHRcdFx0Y29uc3QgZGF0YSA9IHRvQXJyYXkocmVhZEJ5dGVzKHJlYWRlciwgbGVuZ3RoKSk7XG5cdFx0XHR0YXJnZXQubWV0YWRhdGEucHVzaCh7IGtleSwgY29weSwgZGF0YSB9KTtcblx0XHR9XG5cdH0sXG5cdCh3cml0ZXIsIHRhcmdldCkgPT4ge1xuXHRcdHdyaXRlVWludDMyKHdyaXRlciwgdGFyZ2V0Lm1ldGFkYXRhIS5sZW5ndGgpO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXQubWV0YWRhdGEhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gdGFyZ2V0Lm1ldGFkYXRhIVtpXTtcblx0XHRcdHdyaXRlU2lnbmF0dXJlKHdyaXRlciwgJzhCSU0nKTtcblx0XHRcdHdyaXRlU2lnbmF0dXJlKHdyaXRlciwgaXRlbS5rZXkpO1xuXHRcdFx0d3JpdGVVaW50OCh3cml0ZXIsIGl0ZW0uY29weSA/IDEgOiAwKTtcblx0XHRcdHdyaXRlWmVyb3Mod3JpdGVyLCAzKTtcblx0XHRcdHdyaXRlVWludDMyKHdyaXRlciwgaXRlbS5kYXRhLmxlbmd0aCk7XG5cdFx0XHR3cml0ZUJ5dGVzKHdyaXRlciwgbmV3IFVpbnQ4QXJyYXkoaXRlbS5kYXRhKSk7XG5cdFx0fVxuXHR9LFxuKTtcblxuYWRkSGFuZGxlcihcblx0J2Z4cnAnLFxuXHR0YXJnZXQgPT4gdGFyZ2V0LnJlZmVyZW5jZVBvaW50ICE9PSB1bmRlZmluZWQsXG5cdChyZWFkZXIsIHRhcmdldCkgPT4ge1xuXHRcdHRhcmdldC5yZWZlcmVuY2VQb2ludCA9IHtcblx0XHRcdHg6IHJlYWRGbG9hdDY0KHJlYWRlciksXG5cdFx0XHR5OiByZWFkRmxvYXQ2NChyZWFkZXIpLFxuXHRcdH07XG5cdH0sXG5cdCh3cml0ZXIsIHRhcmdldCkgPT4ge1xuXHRcdHdyaXRlRmxvYXQ2NCh3cml0ZXIsIHRhcmdldC5yZWZlcmVuY2VQb2ludCEueCk7XG5cdFx0d3JpdGVGbG9hdDY0KHdyaXRlciwgdGFyZ2V0LnJlZmVyZW5jZVBvaW50IS55KTtcblx0fSxcbik7XG5cbmFkZEhhbmRsZXIoXG5cdCdsc2N0Jyxcblx0dGFyZ2V0ID0+IHRhcmdldC5zZWN0aW9uRGl2aWRlciAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQsIGxlZnQpID0+IHtcblx0XHRjb25zdCBpdGVtOiBhbnkgPSB7fTtcblxuXHRcdGl0ZW0udHlwZSA9IHJlYWRVaW50MzIocmVhZGVyKTtcblxuXHRcdGlmIChsZWZ0KCkpIHtcblx0XHRcdGNvbnN0IHNpZ25hdHVyZSA9IHJlYWRTaWduYXR1cmUocmVhZGVyKTtcblxuXHRcdFx0aWYgKHNpZ25hdHVyZSAhPT0gJzhCSU0nKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2lnbmF0dXJlOiAnJHtzaWduYXR1cmV9J2ApO1xuXG5cdFx0XHRpdGVtLmtleSA9IHJlYWRTaWduYXR1cmUocmVhZGVyKTtcblx0XHR9XG5cblx0XHRpZiAobGVmdCgpKSB7XG5cdFx0XHQvLyAwID0gbm9ybWFsXG5cdFx0XHQvLyAxID0gc2NlbmUgZ3JvdXAsIGFmZmVjdHMgdGhlIGFuaW1hdGlvbiB0aW1lbGluZS5cblx0XHRcdGl0ZW0uc3ViVHlwZSA9IHJlYWRVaW50MzIocmVhZGVyKTtcblx0XHR9XG5cblx0XHR0YXJnZXQuc2VjdGlvbkRpdmlkZXIgPSBpdGVtO1xuXHR9LFxuXHQod3JpdGVyLCB0YXJnZXQpID0+IHtcblx0XHR3cml0ZVVpbnQzMih3cml0ZXIsIHRhcmdldC5zZWN0aW9uRGl2aWRlciEudHlwZSk7XG5cblx0XHRpZiAodGFyZ2V0LnNlY3Rpb25EaXZpZGVyIS5rZXkpIHtcblx0XHRcdHdyaXRlU2lnbmF0dXJlKHdyaXRlciwgJzhCSU0nKTtcblx0XHRcdHdyaXRlU2lnbmF0dXJlKHdyaXRlciwgdGFyZ2V0LnNlY3Rpb25EaXZpZGVyIS5rZXkhKTtcblxuXHRcdFx0aWYgKHRhcmdldC5zZWN0aW9uRGl2aWRlciEuc3VidHlwZSAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHR3cml0ZVVpbnQzMih3cml0ZXIsIHRhcmdldC5zZWN0aW9uRGl2aWRlciEuc3VidHlwZSEpO1xuXHRcdH1cblx0fSxcbik7XG5cbmFkZEhhbmRsZXIoXG5cdCdseXZyJyxcblx0dGFyZ2V0ID0+IHRhcmdldC52ZXJzaW9uICE9PSB1bmRlZmluZWQsXG5cdChyZWFkZXIsIHRhcmdldCkgPT4ge1xuXHRcdHRhcmdldC52ZXJzaW9uID0gcmVhZFVpbnQzMihyZWFkZXIpO1xuXHR9LFxuXHQod3JpdGVyLCB0YXJnZXQpID0+IHtcblx0XHR3cml0ZVVpbnQzMih3cml0ZXIsIHRhcmdldC52ZXJzaW9uISk7XG5cdH0sXG4pO1xuXG5hZGRIYW5kbGVyKFxuXHQnbHJGWCcsXG5cdHRhcmdldCA9PiB0YXJnZXQuZWZmZWN0cyAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQsIGxlZnQpID0+IHtcblx0XHR0YXJnZXQuZWZmZWN0cyA9IHJlYWRFZmZlY3RzKHJlYWRlcik7XG5cdFx0c2tpcEJ5dGVzKHJlYWRlciwgbGVmdCgpKTsgLy8gVEVNUDogc2tpcHBpbmdcblx0fSxcblx0KHdyaXRlciwgdGFyZ2V0KSA9PiB7XG5cdFx0d3JpdGVFZmZlY3RzKHdyaXRlciwgdGFyZ2V0LmVmZmVjdHMhKTtcblx0fSxcbik7XG5cbi8vIGFkZEhhbmRsZXIoXG4vLyBcdCdUeHQyJyxcbi8vIFx0dGFyZ2V0ID0+ICEhKHRhcmdldCBhcyBhbnkpWydfX1R4dDInXSwgLy8gdGFyZ2V0LnRleHQgIT09IHVuZGVmaW5lZCxcbi8vIFx0KHJlYWRlciwgdGFyZ2V0LCBsZWZ0KSA9PiB7XG4vLyBcdFx0Y29uc3QgdGV4dEVuZ2luZURhdGEgPSByZWFkQnl0ZXMocmVhZGVyLCBsZWZ0KCkpO1xuLy8gXHRcdCh0YXJnZXQgYXMgYW55KVsnX19UeHQyJ10gPSBBcnJheS5mcm9tKHRleHRFbmdpbmVEYXRhKTtcbi8vIFx0XHRjb25zb2xlLmxvZygnVHh0Mjp0ZXh0RW5naW5lRGF0YScsIHBhcnNlRW5naW5lRGF0YSh0ZXh0RW5naW5lRGF0YSkpO1xuLy8gXHR9LFxuLy8gXHQod3JpdGVyLCB0YXJnZXQpID0+IHtcbi8vIFx0XHR3cml0ZUJ5dGVzKHdyaXRlciwgbmV3IFVpbnQ4QXJyYXkoKHRhcmdldCBhcyBhbnkpWydfX1R4dDInXSkpOyAvLyBuZXcgVWludDhBcnJheSh0YXJnZXQudGV4dEVuZ2luZURhdGEhKSk7XG4vLyBcdH0sXG4vLyApO1xuXG5hZGRIYW5kbGVyKFxuXHQnRk1zaycsXG5cdHRhcmdldCA9PiB0YXJnZXQuZmlsdGVyTWFzayAhPT0gdW5kZWZpbmVkLFxuXHQocmVhZGVyLCB0YXJnZXQpID0+IHtcblx0XHR0YXJnZXQuZmlsdGVyTWFzayA9IHtcblx0XHRcdGNvbG9yU3BhY2U6IHJlYWRDb2xvcihyZWFkZXIpLFxuXHRcdFx0b3BhY2l0eTogcmVhZFVpbnQxNihyZWFkZXIpLFxuXHRcdH07XG5cdH0sXG5cdCh3cml0ZXIsIHRhcmdldCkgPT4ge1xuXHRcdHdyaXRlQnl0ZXMod3JpdGVyLCBuZXcgVWludDhBcnJheSh0YXJnZXQuZmlsdGVyTWFzayEuY29sb3JTcGFjZSkpO1xuXHRcdHdyaXRlVWludDE2KHdyaXRlciwgdGFyZ2V0LmZpbHRlck1hc2shLm9wYWNpdHkpO1xuXHR9LFxuKTtcblxuLy8gVE9ETzogaW1wbGVtZW50XG5hZGRIYW5kbGVyKFxuXHQnbGZ4MicsXG5cdHRhcmdldCA9PiAhdGFyZ2V0LCAvLyB0YXJnZXQub2JqZWN0QmFzZWRFZmZlY3RzTGF5ZXJJbmZvICE9PSB1bmRlZmluZWQsXG5cdChyZWFkZXIsIF90YXJnZXQsIGxlZnQpID0+IHtcblx0XHRza2lwQnl0ZXMocmVhZGVyLCBsZWZ0KCkpO1xuXHRcdC8vIGNvbnN0IHZlcnNpb24gPSByZWFkVWludDMyKHJlYWRlcik7XG5cdFx0Ly8gY29uc3QgZGVzY3JpcHRvclZlcnNpb24gPSByZWFkVWludDMyKHJlYWRlcik7XG5cblx0XHQvLyBjb25zdCBuYW1lID0gcmVhZGVyLnJlYWRVbmljb2RlU3RyaW5nKCk7XG5cdFx0Ly8gY29uc3QgY2xhc3NJZCA9IHJlYWRTdHJpbmdPckNsYXNzSWQocmVhZGVyKTtcblx0XHQvLyBjb25zdCBpdGVtc0NvdW50ID0gcmVhZFVpbnQzMihyZWFkZXIpO1xuXG5cdFx0Ly9mb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zQ291bnQ7IGkrKykge1xuXHRcdC8vXHRjb25zb2xlLmxvZygncmVhZCBpdGVtJyk7XG5cdFx0Ly9cdGNvbnN0IGtleSA9IHJlYWRTdHJpbmdPckNsYXNzSWQocmVhZGVyKTtcblx0XHQvL1x0Y29uc29sZS5sb2coJ2tleScsIFtrZXldKTtcblxuXHRcdC8vfVxuXG5cdFx0Ly90YXJnZXQub2JqZWN0QmFzZWRFZmZlY3RzTGF5ZXJJbmZvID0ge1xuXHRcdC8vXHR2ZXJzaW9uLFxuXHRcdC8vXHRkZXNjcmlwdG9yVmVyc2lvbixcblx0XHQvL1x0ZGVzY3JpcHRvcjoge1xuXHRcdC8vXHRcdG5hbWUsXG5cdFx0Ly9cdFx0Y2xhc3NJZCxcblx0XHQvL1x0XHQvLy4uLlxuXHRcdC8vXHR9LFxuXHRcdC8vfTtcblx0fSxcblx0KF93cml0ZXIsIF90YXJnZXQpID0+IHtcblx0XHQvLy4uLlxuXHR9LFxuKTtcbiJdLCJzb3VyY2VSb290IjoiRDpcXFByb2plY3RzXFxnaXRodWJcXGFnLXBzZFxcc3JjIn0=
